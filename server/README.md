## 库表设计

### 用户表 user

> Sequelize 带增/删/改时间戳，通过删除时间是否有值判断账号状态

| 字段名   | 类型         | 含义     | 约束 | 备注                   |
| -------- | ------------ | -------- | ---- | ---------------------- |
| id       | int          | 用户编号 | 主键 |                        |
| name     | varchar(50)  | 昵称     |      |                        |
| password | varchar(100) | 密码     |      | 加盐哈希               |
| role     | tinyint      | 角色类型 |      | 1：管理员；0：普通用户 |
| email    | varchar(50)  | 邮箱     |      | 用于找回密码           |

### 文章表 article

| 字段名    | 类型         | 含义           | 约束 | 备注                              |
| --------- | ------------ | -------------- | ---- | --------------------------------- |
| id        | int          | 文章编号       | 主键 |                                   |
| uid       | int          | 作者用户编号   | 外键 |                                   |
| tid       | int          | 类别编号       | 外键 | 标识所属类别，用于组织文档树      |
| title     | varchar(100) | 标题           |      |                                   |
| text      | text         | 内容，Markdown |      |                                   |
| status    | tinyint      | 发布状态       |      | 0：草稿；1：私密发布；2：公开发布 |
| secretKey | varchar(100) | 加密口令       |      | 有则表示加密                      |

### 标签编码表 tag

| 字段名 | 类型        | 含义     | 约束 | 备注 |
| ------ | ----------- | -------- | ---- | ---- |
| id     | int         | 标签编号 | 主键 |      |
| name   | varchar(50) | 标签名称 |      |      |

### 类别编码表 type

> 用于组织文档树

| 字段名 | 类型        | 含义       | 约束 | 备注           |
| ------ | ----------- | ---------- | ---- | -------------- |
| id     | int         | 类型编号   | 主键 | 同文件夹的归属 |
| pid    | int         | 父类型编号 |      | 顶层为 0       |
| level  | int         | 层级       |      | 从 1 计数      |
| name   | varchar(50) | 类型名称   |      |                |

### 文章标签关系表  article_tag

| 字段名 | 类型 | 含义     | 约束      | 备注 |
| ------ | ---- | -------- | --------- | ---- |
| aid    | int  | 文章编号 | 主 / 外键 |      |
| tid    | int  | 标签编号 | 主 / 外键 |      |

## 响应格式

```json
{
    "error_code": 0,
    "msg": "",
    "data": null
}
```

## 错误码

### Token

| error_code | 含义       |
| ---------- | ---------- |
| 1001       | 非法，过期 |
| 1002       | 权限不足   |

### 其他类型

| error_code | 含义            |
| ---------- | --------------- |
| 10001      | 400，参数错误   |
| 10002      | 401，授权失败   |
| 10004      | 403，禁止访问   |
| 10005      | 404，资源未找到 |
| 10000      | 400，默认错误   |
| 0          | 200             |

